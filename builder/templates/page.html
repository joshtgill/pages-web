<html>
    {% load static %}
    <head>
        <title>{{ page.name }}</title>

        <link rel="stylesheet" type="text/css" href="{% static 'styles/page.css' %}">
    </head>
    <body>
        {% include 'core.html' %}

        <div class="content">
            <h1>Build a {{ page.name }}</h1>
            <form id="sheetForm" method="POST">
                {% csrf_token %}
                <input id="sheetNameInput" name="sheetName" placeholder="Sheet name (i.e Menu, Products)" autocomplete="off" value="{{ sheetData.name }}">
                <input class="hidden" name="sheetId" value="{{ sheetData.id }}"></input>
                <div id="items" class="items">
                    {% for sheetItem in sheetData.items %}
                        {% if forloop.counter0 %}
                            <hr>
                        {% endif %}
                        {% with sheetItemIdStr=sheetItem.id|stringformat:"i"|add:"_sheetItem" %}
                        <div id="{{ sheetItemIdStr }}" class="item">
                            <input class="hidden" name="id" value="{{ sheetItem.id }}">
                            <input id="sheetItemTitle" type="text" autocomplete="off" name="title" value="{{ sheetItem.title }}">
                            <textarea rows=3 name="description" value="">{{ sheetItem.description }}</textarea>
                            <div class="row-three">
                                <input id="sheetItemPrice" type="number" step="0.01" name="price" value="{{ sheetItem.price }}">
                                <button type="button" onclick="markSheetItemToDelete({{ sheetItem.id }})"><u>Delete item</u></button>
                            </div>
                        </div>
                        {% endwith %}
                    {% endfor %}
                    <input class="hidden" id="sheetItemsToDelete" name="sheetItemsToDelete" value=""></input>
                </div>
                <button id="addItemButton" type="button" onclick="displayEmptySheetItem()">Add an item</button>
                <div class="buttons">
                    <button id="saveSheetButton" type="submit">
                        {% if sheetData %}
                            Save changes
                        {% else %}
                            Create Sheet
                        {% endif %}
                    </button>
                    {% if sheetData %}
                        <button id="deleteSheetButton" type="button" onclick="submitDeleteSheetForm({{ sheetData.id }}, -1)">Delete this Sheet</button>
                    {% endif %}
                </div>
            </form>
            <form id="deleteForm" method="POST">
                {% csrf_token %}
                <input class="hidden" id="deleteSheetIdInput" name="deleteSheetId">
            </form>
        </div>
    </body>

    <script src="{% static 'scripts/page.js' %}"></script>
</html>
